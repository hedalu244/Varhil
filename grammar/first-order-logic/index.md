---
layout: default
title: First-order-logic
---

## グロスについて

**グロス** とは例文の下に書かれる逐語訳である。ここで使っているグロスには独自の規則があるのでそれについて述べる。

グロスは1単語につき、アリティ部、品詞部、情報部の三つの部分に分かれる。但し、このうちいくつかが空文字列である場合もある。

アリティは、その語が統語的にどのような働きをするのかを示す。アリティが1つ以上の`/`であるものは、後ろにその数の句を伴って句を形成する。アリティが`{`である語は、アリティが`}`である語までの句を伴って句を形成する（括弧のように）。アリティが空である語は単独で句を形成する。アリティは多くの場合品詞によって一意に決まっている。

品詞は英字大文字の略称で記述する。但し、品詞が無標のものは述語である。

情報部は英字大文字以外の文字体系で書かれる部分であり、品詞によって異なる情報を表す。

## 述語と格

### 述語

**述語** は述語論理の述語記号を表現する品詞であり、内容語はすべて述語である。

### 格

**格** は述語と引数の関係を表す形態素である。 各々の述語には、それが受けることができる有限個の格が決まっていて、それらのすべてに議論対象を対応付ける（受けることができる格の集合から議論対象への写像を与える）ことで厳密に真偽値が定まる。例えば、述語「食べる」は動作主を表す格「が」と、対象を表す格「を」に議論対象を対応させることで、真偽値が決まる。（一部のプログラミング言語にある[名前付き引数(named parameter)](https://en.wikipedia.org/wiki/Named_parameter)に似ている）

格はあくまでも述語に対して与えるための添え字であって、格自体の解釈には厳密な意味は要求されない。異なる述語のどの引数を同じ格とするかは辞書作成の恣意による。

ここでは例として以下のような述語を使う。

{:.words}
{:.formula} リンゴだ(は:x)
: xはリンゴだ

{:.formula} 人間だ(は:x)
: xは人間だ

{:.formula} 赤い(は:x)
: xは赤い

{:.formula} 食べる(が:x, を:y)
: xがyを食べる

述語は単独でそれ自身を表す **述語句** になれる。

## 変数と限定詞

### 変数

**変数** は、述語論理の変数記号に対応する概念で、一つの議論対象を意味する。  

### 限定詞

**限定詞** は変数を表現する品詞である。
限定詞は、さらに孤立限定詞(`DET`)、新規限定詞(`DET自然数+`)、継承限定詞(`DET自然数`)、終了限定詞(`DET自然数-`)の4種類に細分化される。

文中に出現した限定詞と変数の対応は以下のように決定される。  

+ 孤立限定詞は出現毎に他のどの限定詞の出現とも異なる変数を指す。
+ 新規限定詞は、それまでに出現したどの限定詞とも異なる変数を指す。
+ 継承限定詞と終了限定詞は、自然数部が同じ限定詞の、一つ前の出現と同じ変数を指す。
+ 終了限定詞は、それ以後に出現するどの限定詞とも異なる変数を指す。
+ 自然数部が異なる限定詞は、異なる変数を指す。
+ 上記条件が矛盾する場合、エラーである。

ある番号の限定詞を語順で見て最後に使用するとき、あるいは、ある番号の限定詞をその変数を指して使う最後のときは、必ず、新規限定詞を使うことで変数が新たに割り当てられたことを明示する。
また、各々の限定詞を最後に使用するときは 終了限定詞を使うことで、その変数がそれ以後使われないことを明示できる（必須ではない）。

いかなる状況に於いても、例えば文や段落を跨いだ場合や、発話者が変わった場合でも、それぞれの限定詞が表す変数はリセットされない。これを利用すれば、限定詞を介して以前の段落で使った変数や他の発話者が使った変数を以後の段落で参照することもできる（そうされたくない場合は終了限定詞を使えばよい）し、逆に以前とは異なる変数を指したいときは必ず新規限定詞を使う必要がある。

限定詞は単独でその変数を表す **名詞句** になれる。

## 前置詞と述語句

### 述語句

**述語句** は、論理式と述語ポインタを情報として持つ統語的まとまりである。述語ポインタは論理式中のある述語記号の位置の情報である（論理式中に同じ述語記号が複数回現れた場合でも、述語ポインタはそれぞれを区別する）。

述語は単独で述語句になることができる。この場合、論理式は引数を持たない状態の述語記号であり、述語ポインタはその述語記号を指す。

### 前置詞

**前置詞** は(`//PRE格`)の形で表される品詞である。

前置詞は直後に名詞句、その後ろに述語句を取って述語句を成す前置二項演算子であり、述語句の述語ポインタが表す述語記号の、前置詞が表す格に、名詞句が表す変数を割り当てる操作を行う。形成される述語句は、それぞれの論理式の論理積と、述語句の述語ポインタを表す。

述語句は単独で単文になり、構成された論理式を表す。

{:.example}
{:.glossed} e://PREは au:DET pina:リンゴだ
: {:.formula} リンゴだ(は:x)
^
{:.example}
{:.glossed} fe://PREが a:DET0+ be://PREを a'a:DET1+ moku:食べる
: {:.formula} 食べる(が:x, を:y)

## 関係詞と名詞句

### 名詞句

**名詞句** は、論理式と変数を情報として持つ統語的まとまりである。

限定詞は単独でその変数を表す名詞句になれる。この場合、論理式として空積（真）を、変数としてその名詞が表す変数を表す。

### 関係節

**関係詞** は(`//REL格`)の形で表される品詞である。

関係詞は直後に述語句、その後ろに名詞句を取って名詞句を成す前置二項演算子であり、述語句の述語ポインタが表す述語記号の、関係詞が表す格に、名詞句が表す変数を割り当てる操作を行う。形成される名詞句は、それぞれの論理式の論理積と、名詞句の変数を表す。

例えば、 名詞句`//RELは リンゴだ DET` は論理式 `リンゴだ(は:x)`を表しつつ、その変数xを指す限定詞の代わりとして、前置詞の第一引数や、関係詞の第二引数として使うことができる。

{:.example}
{:.glossed} e://PREは ei://RELは pina:リンゴだ au:DET loja:赤い
: {:.formula}  リンゴだ(は:x) ∧ 赤い(は:x)
^
{:.example}
{:.glossed} fe://PREが ei://RELは jana:人間だ au:DET be://PREを ei://RELは loja:赤い ei://RELは pina:リンゴだ au:DET moku:食べる
: {:.formula} 人間だ(は:x) ∧ リンゴだ(は:y) ∧ 赤い(は:y) ∧ 食べる(が:x, を:y)

また名詞句は単独で単文になることもでき、構成された論理式を表す。

{:.example}
{:.glossed} ei://RELは pina:リンゴだ au:DET
: {:.formula} リンゴだ(は:x)
^
{:.example}
{:.glossed} ei://RELは loja:赤い ei://RELは pina:リンゴだ au:DET
: {:.formula} リンゴだ(は:x) ∧ 赤い(は:x)
^
{:.example}
{:.glossed} au:DET
: {:.formula} ⊤

### 無標格と一般名詞

ある特定の格を **無標格** とする。ここでは格「は」（英語のbe動詞の主語）に対応する格を無標格とする。

無標格を表す関係詞が二番目の引数に孤立限定詞を取っている場合（ある述語句が無標格関係詞と孤立限定詞に挟まれている場合）、さらにその名詞句が単文になっていないとき、その関係詞と限定詞は省略できる。つまり、無標格を取る述語句は単独で名詞句になれる。この名詞句や名詞句になれる述語を便宜上 **一般名詞** と呼ぶ。

これを読むときは、名詞句であるべきところ（前置詞の第一引数や関係詞の第二引数）に述語句が置かれていたとき（またその時に限って）、無標格関係詞と孤立限定詞（つまりその場限りの変数）を補えばよい。

{:.example}
{:.glossed} e://PREは pina:リンゴだ loja:赤い
: {:.formula} リンゴだ(は:x) ∧ 赤い(は:x)
^
{:.example}
{:.glossed} be://PREを ei://RELは loja:赤い pina:リンゴだ moku:食べる
: {:.formula} リンゴだ(は:x) ∧ 赤い(は:x) ∧ 食べる(を:x)

## 文

単文を0個以上並べたものが **文** である。文はVarhilにおけるトップレベル要素であり、一つの文が一つの命題（論理式）に対応する（Varhil文は全体が文になっている）。

文は、各単文が表す論理式の論理積の、すべての変数を存在量化した論理式を表す。但し、否定を含む場合はその限りではない（後述）。

{:.example}
{:.glossed} e://PREは a:DET0+ pina:リンゴだ e://PREは u:DET0- loja:赤い
: {:.formula} ∃x リンゴだ(は:x) ∧ 赤い(は:x)
^
{:.example}
{:.glossed} fe://PREが ei://RELは jana:人間だ au:DET be://PREを ei://RELは pina:リンゴだ au:DET moku:食べる
: {:.formula} ∃x∃y 人間だ(は:x) ∧ リンゴだ(は:y) ∧ 食べる(が:x, を:y)

## 否定と量化

### 否定節

文を **否定開始**(`{NEG`)と **否定終止**(`}NEG`)で挟むことで その文が表す命題の否定命題を表す単文になる。
これを **否定節** と呼ぶ。否定節も他の単文と並べて文を構成したり、他の否定節に入れ子にしたりできる。  

ある変数がその否定部の中でのみ使われている場合（否定部の外にその変数を指す限定詞も、その変数が渡される述語もない場合）、その変数は否定の内部で存在量化される。（￢∃と考えても良いし、∀￢と考えても良い）。

{:.example}
{:.glossed} nou:{NEG e://PREは a:DET0+ pina:リンゴだ e://PREは u:DET0- jana:人間だ noi:}NEG
: {:.formula} ￢ (∃ x リンゴだ(は:x) ∧ 人間だ(は:x))
^
{:.example}
{:.glossed} nou:{NEG e://PREは a:DET0+ pina:リンゴだ e://PREは i:DET0 jana:人間だ noi:}NEG u:DET0-
: {:.formula} ∃ x ￢ ( リンゴだ(は:x) ∧ 人間だ(は:x))

### 単独否定

**単独否定**(`/NEG`)は、直後の句を否定する前置単項演算子である。単文の前にあればその単文の終わりまで、前置詞や関係詞の前にあればそれが形成する述語句や名詞句の終わりまで、述語の前にあればその述語のみを否定する。限定詞の前にあった場合はそれのみを否定するが、これは空積の否定なのでナンセンスである。また、単独否定を二つ重ねることもできるが、二重否定なのでナンセンスである（古典論理に従い、二重否定を除去しても意味が変わらない意味論を採用する）

また、`{NEG` ～ `}NEG` 同様、否定される範囲でのみ使用される変数は否定の中で存在量化され、外側でも使用される変数は否定の外で量化される。

{:.example}
{:.glossed} no:/NEG fe://PREが au:DET be://PREを pina:リンゴだ moku:食べる
: {:.formula} ￢ ∃x ∃y (リンゴだ(は:y) ∧ 食べる(が:x, をy))
^
{:.example}
{:.glossed} fe://PREが au:DET no:/NEG be://PREを pina:リンゴだ moku:食べる
: {:.formula} ∃x ￢ ∃y (リンゴだ(は:y) ∧ 食べる(が:x, を:y))
^
{:.example}
{:.glossed} fe://PREが au:DET be://PREを pina:リンゴだ no:/NEG moku:食べる
: {:.formula} ∃x ∃y (リンゴだ(は:y) ∧ ￢食べる(が:x, を:y))
^
{:.example}
{:.glossed} fe://PREが au:DET be://PREを no:/NEG pina:リンゴだ moku:食べる
: {:.formula} ∃x ∃y (￢リンゴだ(は:y) ∧ 食べる(が:x, を:y))


## 論理表現

一階述語論理での各論理記号（否定￢、論理積∧、論理和∨、含意⇒、同値⇔、存在量化∃、全称量化∀）がVarhilでどう表現されるか見てこう。

今まで見てきたように、任意のVarhil文は否定開始、否定終止で挟むことでその否定を、並べることでそれらの論理積を表現できる。また、すべての変数は無標で存在量化されているので、∃も表現できたといえる。

論理和 `P∨Q` は古典論理上で `￢(￢P∧￢Q)` と等価であるので、Varhilではこの組み合わせで表現する。

{:.example}
{:.glossed} nou:{NEG nou:{NEG ～ noi:}NEG nou:{NEG … noi:}NEG noi:}NEG
: {:.formula} ～ ∨ …

含意 `P⇒Q` は古典論理上で`￢(P∧￢Q)` と等価であるので、Varhilではこの組み合わせで表現する。

{:.example}
{:.glossed} nou:{NEG ～ nou:{NEG … noi:}NEG noi:}NEG
: {:.formula} ～ ⇒ …

同値 `P⇔Q` は `(P⇒Q)∧(Q⇒P)` の糖衣構文であり、古典論理上で `￢(P∧￢Q)∧￢(￢P∧Q)` と等価であるので、Varhilではこの組み合わせで表現する。

{:.example}
{:.glossed} nou:{NEG ～ nou:{NEG … noi:}NEG noi:}NEG nou:{NEG nou:{NEG ～ noi:}NEG … noi:}NEG
: {:.formula} ～ ⇔ …

全称量化は `∀x; P` は古典論理上で  `￢∃x￢P`と等価であるので、Varhilではこの組み合わせで表現する。（限定詞も名詞句であるから単文になれるので、二重の否定の間に限定詞を置けばよい）

{:.example}
{:.glossed} nou:{NEG a:DET0+ nou:{NEG ～ noi:}NEG noi:}NEG
: {:.formula} ∀x ～

従って、以上のような古典論理に従った同一視を行えば、開論理式を除く一階述語論理のすべての論理式と等価な表現をVarhilでも表現できるといえる。

なお、これらは任意のVarhil文同士の結合ができることを示しているのみで、条件が整えば（単独否定を使える場合などは）より短い形で書くことができる。

{:.example}
{:.glossed} no:/NEG e://PREは au:DET no:/NEG pina:リンゴだ
: {:.formula} ∀x リンゴだ(は:x)
^
{:.example}
{:.glossed} no:/NEG e://PREは pina:リンゴだ no:/NEG loja:赤い
: {:.formula} ∀x リンゴだ(は:x)⇒赤い(は:x)
^
{:.example}
{:.glossed} no:/NEG e://PREは no:/NEG pina:リンゴだ no:/NEG jana:人間だ
: {:.formula} ∀x リンゴだ(は:x)∨人間だ(は:x)

また、述語論理には述語記号の他に定数記号や関数記号が存在するが、定数記号は、ある一つの値に対して真となる1変数述語記号として、アリティnの関数記号は、ある引数が一つの値に対してのみ真となるアリティn+1の述語記号として、表現できる。

<script>
  markupAllFormulas();
  markupAllGlosses();
</script>
